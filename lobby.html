<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hangman Lobby</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      background: linear-gradient(135deg, #5E63BA, #A084E8);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      text-align: center;
      height: 100vh;
    }
    .heart-container {
      font-size: 2rem;
      margin: 20px 0;
    }
    .play-button {
      padding: 12px 20px;
      background: white;
      color: #5E63BA;
      border-radius: 5px;
      font-weight: bold;
      font-size: 1.2rem;
      cursor: pointer;
      display: none;
    }
  </style>
</head>
<body>
  <h1>Hangman Game</h1>
  <div class="heart-container"></div>
  <button class="play-button">Play</button>

 <script>
  const container = document.querySelector(".heart-container");
  const playButton = document.querySelector(".play-button");
  const regenTime = 10 * 60 * 1000;
  let hearts = JSON.parse(localStorage.getItem("hearts")) || Array(5).fill(null);

  const getNextUsedHeartIndex = () => hearts.findIndex(h => h !== null);

  const updateUI = () => {
    container.innerHTML = "";
    let canPlay = false;

    hearts.forEach((usedAt, i) => {
      const span = document.createElement("span");

      if (usedAt === null) {
        span.textContent = "‚ù§Ô∏è";
        canPlay = true;
      } else {
        const nextIndex = getNextUsedHeartIndex();
        if (i === nextIndex) {
          const timeLeft = regenTime - (Date.now() - usedAt);
          if (timeLeft <= 0) {
            hearts[i] = null;
            span.textContent = "‚ù§Ô∏è";
            canPlay = true;
            // save after regeneration
            localStorage.setItem("hearts", JSON.stringify(hearts));
          } else {
            const m = String(Math.floor(timeLeft / 1000 / 60)).padStart(2, "0");
            const s = String(Math.floor((timeLeft / 1000) % 60)).padStart(2, "0");
            span.textContent = `üïì ${m}:${s}`;
          }
        } else {
          span.textContent = "üïì --:--"; // waiting
        }
      }

      container.appendChild(span);
    });

    localStorage.setItem("hearts", JSON.stringify(hearts));
    playButton.style.display = canPlay ? "inline-block" : "none";
  };

  playButton.addEventListener("click", () => {
    location.href = "index.html";
  });

  updateUI();
  setInterval(updateUI, 1000);
</script>
</body>
</html>
